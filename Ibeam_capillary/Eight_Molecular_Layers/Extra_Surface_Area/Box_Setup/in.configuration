# read in graphite data
# insert water
# equilibrate



# graphite dimensions:
# 0.0 10.062000000000001 zlo zhi


variable            TEMP string 240
variable            PRES string 1
variable            NAME string Ibeam_240K
variable            TCOUPL string 5000.0
variable            PCOUPL string 10000.0
variable            TDAMP string 1000.0
variable            PDAMP string 10000.0

units	   	    real
atom_style 	    atomic
log		    log.eq_${NAME}

variable Z_G equal 10.062000000000001
variable Z_W equal 23.642929102

variable	XDIM string 78.752
variable 	YDIM string 80.13644830362759


################################################
####### Equilibrate Liquid Water #########
################################################

log log.eq_${NAME}

# read in graphite data
read_data data.graphite group graphite extra/atom/types 1

# Insert water
read_data data.Ibeam_MLmW_240K add append shift 0.0 0.0 ${Z_G} group water offset 1 0 0 0 0


# Define potential
# CHECK ON THIS %%%%%%%%%%%%
#
pair_style sw
pair_coeff * * MLC_e.sw C mW


# Delete water and ice atoms that are overlapping
#
delete_atoms overlap 2.5 water graphite

write_data test.${NAME}


# Fix graphite atoms in place
#
fix 1 graphite setforce 0.0 0.0 0.0
velocity graphite set 0.0 0.0 0.0
velocity water create ${TEMP} 120598 rot yes dist gaussian
timestep 5.0

# Define output
#

compute 1 water msd
compute 2 water stress/atom NULL
compute 3 water temp

thermo 100
thermo_style custom step c_3 press vol etotal ke pe c_1[4] density

# Neighbor lists
#
neigh_modify delay 0 every 1 check yes




# Set fixes
#
fix                 2 water momentum 10 linear 1 1 1 rescale
fix                 3 all nve
fix                 4 water temp/csvr ${TEMP} ${TEMP} 500.0 928347

# Run 0.25 ns equilibration
#
dump                1 all custom 100 eq.${NAME}.dump id type x y z vx vy vz
run                 50000

# Create data file for import to other simulations
#
write_data data.${NAME}


